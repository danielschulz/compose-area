{"version":3,"sources":["webpack:///./index.js"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAqC;;AAErC;AACA,cAAc,yCAAI;;AAElB;AACA,oBAAoB,oDAAY;;AAEhC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bootstrap.5.bundle.js","sourcesContent":["import * as wasm from 'compose-area';\n\n// Assign wasm module to window object for testing purposes.\nwindow.wasm = wasm;\n\n// Initialize compose area\nconst composeArea = wasm.bind_to('wrapper');\n\n// Add event listeners\n\nconst wrapper = document.getElementById('wrapper');\n\n/**\n * When the selection changes, update the caret position.\n *\n * Note: Unfortunately this can only be set on document level, not on the\n * wrapper itself.\n */\ndocument.addEventListener('selectionchange', (e) => {\n    console.log('selectionchange', e);\n    composeArea.update_caret_position();\n});\n\n/**\n * On keydown, process the key.\n */\nwrapper.addEventListener('keydown', (e) => {\n    console.log('keydown:', e);\n    if (!e.ctrlKey && !e.altKey && !e.metaKey) {\n        const preventDefault = composeArea.process_key(e.key);\n        if (preventDefault) {\n            e.preventDefault();\n        }\n    }\n});\n\n/**\n * On cut, remove the current selection from the internal state.\n *\n * This event is fired before the DOM is modified, before the text-to-be-cut is\n * removed from the input field.\n */\nwrapper.addEventListener('cut', (e) => {\n    console.log('cut', e);\n    composeArea.remove_selection(false);\n});\n\n/**\n * On paste, override the default paste handler.\n *\n * Instead, insert the clipboard contents into the compose area at the current\n * selection and update the DOM.\n */\nwrapper.addEventListener('paste', (e) => {\n    console.log('paste', e);\n    const clipboardData = e.clipboardData.getData('text/plain');\n    if (clipboardData) {\n        composeArea.insert_text(clipboardData);\n        e.preventDefault();\n    }\n});\n\n// Emoji handling\n\nfunction insertEmoji(e) {\n    const img = e.target.nodeName === 'IMG' ? e.target : e.target.children[0];\n    composeArea.insert_image(img.src, img.alt, 'emoji');\n}\ndocument.getElementById('tongue').addEventListener('click', insertEmoji);\ndocument.getElementById('beers').addEventListener('click', insertEmoji);\ndocument.getElementById('facepalm').addEventListener('click', insertEmoji);\n"],"sourceRoot":""}